/**
 * Обработчики команд бота
 */

/**
 * Обработчик команды /start
 * @param {Object} bot - Экземпляр бота
 * @param {Object} msg - Объект сообщения
 */
const handleStart = (bot, msg) => {
  const chatId = msg.chat.id;
  const userName = msg.from.first_name || 'Друг';
  
  bot.sendMessage(
    chatId,
    `Привет, ${userName}! Я ваш новый Telegram бот. Вот что я умею:

/help - Показать список команд
/info - Информация о боте
/case - Выбрать категорию кейса для подготовки к интервью
/ai [вопрос] - Задать вопрос искусственному интеллекту
/subscribe - Оформить премиум-подписку
/status - Проверить статус подписки`
  );
};

/**
 * Обработчик команды /help
 * @param {Object} bot - Экземпляр бота
 * @param {Object} msg - Объект сообщения
 */
const handleHelp = (bot, msg) => {
  const chatId = msg.chat.id;
  
  bot.sendMessage(
    chatId,
    `Список доступных команд:

/start - Начать работу с ботом
/help - Показать это сообщение
/info - Информация о боте
/case - Выбрать категорию кейса для подготовки к интервью
/end - Завершить текущую сессию с ассистентом
/ai [вопрос] - Задать вопрос искусственному интеллекту
/subscribe - Оформить премиум-подписку
/status - Проверить статус подписки

Бесплатно вы можете отправить 3 запроса. Для неограниченного доступа оформите премиум-подписку за $29.

Также вы можете просто написать любое сообщение, и я отвечу с помощью искусственного интеллекта.

Если у вас активна сессия с ассистентом по кейсам, все ваши сообщения будут направлены этому ассистенту.`
  );
};

/**
 * Обработчик команды /info
 * @param {Object} bot - Экземпляр бота
 * @param {Object} msg - Объект сообщения
 */
const handleInfo = (bot, msg) => {
  const chatId = msg.chat.id;
  
  bot.sendMessage(
    chatId,
    `Этот бот был создан с помощью Node.js и библиотеки node-telegram-bot-api.

Бот использует OpenAI API (GPT-4o) для обработки запросов и генерации ответов.
Для функции подготовки к интервью используется OpenAI Assistants API.

Бесплатно доступно 3 запроса. Для неограниченного доступа оформите премиум-подписку за $29.

Версия: 1.3.0
Автор: Калы Саманбеков`
  );
};

module.exports = {
  handleStart,
  handleHelp,
  handleInfo
};
